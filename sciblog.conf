
#set wsgi
WSGIDaemonProcess example.com python-path=/var/www/sciblog:/usr/local/lib/python2.7/site-packages
WSGIProcessGroup example.com
WSGIScriptAlias / /var/www/sciblog/sciblog/wsgi.py process-group=example.com

#set public directories for apache
Alias /img/ /var/www/sciblog/img/
Alias /static/ /var/www/sciblog/blog/static/

<Directory /var/www/sciblog/blog/static>
    Require all granted
</Directory>

<Directory /var/www/sciblog/img>
    Require all granted
</Directory>

<Directory /var/www/sciblog/sciblog>
    <Files wsgi.py>
    Require all granted
    </Files>
</Directory>

#redirect www to / without SSL (uncomment this if you want to set www.example.com to example.com)
#<VirtualHost *:80>
#    ServerName example.com
#    ServerAlias www.example.com
#    Redirect permanent / http://example.com/
#</VirtualHost>

#redirect www to / with SSL (uncomment this after you installed the SSL certificate in your server)
#<VirtualHost *:80>
#    ServerName example.com
#    ServerAlias www.example.com
#    ServerAdmin me@example.com
#    Redirect permanent / https://example.com/
#</VirtualHost>
#<VirtualHost *:443>
#    ServerName www.example.com
#    Redirect permanent / https://example.com/
#    SSLEngine On
#    SSLCertificateFile /etc/letsencrypt/live/www.example.com/cert.pem
#    SSLCertificateKeyFile /etc/letsencrypt/live/www.example.com/privkey.pem
#    SSLCertificateChainFile /etc/letsencrypt/live/www.example.com/chain.pem
#</VirtualHost>
#<VirtualHost *:443>
#    ServerName example.com
#    DocumentRoot /var/www/sciblog
#    SSLEngine On
#    SSLCertificateFile /etc/letsencrypt/live/www.example.com/cert.pem
#    SSLCertificateKeyFile /etc/letsencrypt/live/www.example.com/privkey.pem
#    SSLCertificateChainFile /etc/letsencrypt/live/www.example.com/chain.pem
#</VirtualHost>


# Cache control headers
# Add expiration date to static objects.
# According to Google:
# The Cache-Control header was defined as part of the HTTP/1.1 specification 
# and supersedes previous headers (for example, Expires) used to define 
# response caching policies. All modern browsers support Cache-Control, so 
# that's all you need.
# https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/http-caching?hl=en#cache-control
<IfModule mod_headers.c>
    Header set Connection keep-alive
    <filesmatch "\.(jpg|jpeg|png|ico|flv|gif|swf|eot|woff|otf|ttf|svg)$">
        Header set Cache-Control "max-age=31536000, public"
    </filesmatch>
    # css and js should use private for proxy caching https://developers.google.com/speed/docs/best-practices/caching#LeverageProxyCaching
    <filesmatch "\.(css|js)$">
        Header set Cache-Control "max-age=2628000, private"
    </filesmatch>
    <filesMatch "\.(x?html?|php)$">
        Header set Cache-Control "max-age=86400, private, must-revalidate"
    </filesMatch>
</IfModule>


# Expire headers
# Add expiration date to static objects.
# to enable this type: a2enmod expires and then restart apache
# this can also be manage with Cloudflare
# <IfModule mod_expires.c>
#     ExpiresActive On
#     ExpiresByType image/jpg "access 1 year"
#     ExpiresByType image/jpeg "access 1 year"
#     ExpiresByType image/gif "access 1 year"
#     ExpiresByType image/png "access 1 year"
#     ExpiresByType image/x-icon "access 1 year"
#     ExpiresByType text/css "access 1 month"
#     ExpiresByType text/html "access 1 week"
#     ExpiresByType application/pdf "access 1 month"
#     ExpiresByType application/x-javascript "access 1 month"
#     ExpiresByType text/x-javascript "access 1 month"
#     ExpiresByType video/ogg "access 1 year"
#     ExpiresByType audio/ogg "access 1 year"
#     ExpiresByType video/mp4 "access 1 year"
#     ExpiresByType video/webm "access 1 year"
#     ExpiresByType font/truetype "access 1 year"
#     ExpiresByType font/opentype "access 1 year"
#     ExpiresByType application/x-font-woff "access 1 year"
#     ExpiresByType application/x-shockwave-flash "access 1 month"
#     ExpiresDefault "access 1 month"
# </IfModule>

# Disable server signature (for security)
ServerSignature Off
ServerTokens Prod




##Tweaks##
Header set X-Frame-Options SAMEORIGIN





